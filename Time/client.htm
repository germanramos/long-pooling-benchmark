<!DOCTYPE html>
    <head>
        <meta charset="utf-8">
        <title>Time Client</title>
        <style>
            body {
                text-align: center;
            }
            #time {
                font-size: 40px;
                font-weight: bold
            }
            #server {
                
                font-size: 20px;
            }
        </style>
    </head>
    <body>
        <div id="time">Initializing...</div>
        <div id="server">Initializing...</div>
        <input id="button" type="button" value="Stop"/>
    </body>
    <script>
        var servers = ["server1.cloud1.com:1337", "server2.cloud1.com:1337"];
        var refresh = true;
        
        function updatePage(time) {
            document.getElementById("time").innerHTML = time;
            document.getElementById("server").innerHTML = servers[0];
            if (refresh) makeRequest();
        }

        function makeRequest() {
            xmlHttpReq = new XMLHttpRequest();
            xmlHttpReq.open('GET', "http://" + servers[0], true);
            xmlHttpReq.timeout = 4000;
            xmlHttpReq.onreadystatechange = function() {
                if (xmlHttpReq.readyState == 4) {
                    if (xmlHttpReq.status==200) {
                        updatePage(xmlHttpReq.responseText);
                    } else {
                        //Put the current first server at last position
                        servers.push(servers.shift());
                        if (refresh) makeRequest();
                    }
                }
            }
            xmlHttpReq.send(null);
        }
        
        document.getElementById("button").onclick = function() {
            refresh = !refresh;
            if (refresh) {
                this.value = "Stop";
                makeRequest();
            } else {
                this.value = "Start";
            }
        }
        
        makeRequest();
    </script>
</html>